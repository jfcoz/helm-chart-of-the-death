---
# Source: helm-chart-of-the-death/templates/monitoring/x509-certificate-exporter/helmrelease.yaml
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: x509
  namespace: infra-x509
  annotations:
    helm.sh/resource-policy: keep
spec:
  interval: 1h
  timeout: 30m
  chart:
    spec:
      chart: x509-certificate-exporter
      version: "3.19.1"
      sourceRef:
        kind: HelmRepository
        name: "enix"
        namespace: default
      interval: 1h
  install:
    remediation:
      retries: -1
  upgrade:
    remediation:
      remediateLastFailure: true
  test:
    enable: true
  values:
    prometheusRules:
      create: false
    prometheusServiceMonitor:
      create: false
    secretsExporter:
      cache:
        maxDuration: 600
      resources:
        limits:
          cpu: 1000m
